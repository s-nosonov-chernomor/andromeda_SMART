<!-- app/web/templates/login.html -->
<!doctype html>
<html><head><meta charset="utf-8"><title>Вход</title>
<link rel="stylesheet" href="/static/app.css"></head>
<body class="login">
  <form id="loginForm" class="card">
    <h3>Вход</h3>
    <input name="username" placeholder="Логин" required value="user">
    <input name="password" placeholder="Пароль" type="password" required value="default">
    <button type="submit">Войти</button>
    <div id="loginMsg"></div>
  </form>
<script>
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const res = await fetch('/api/login',{method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({username:fd.get('username'), password:fd.get('password')})
  });
  if(res.ok){ location.href='/current'; } else {
    document.getElementById('loginMsg').textContent = (await res.json()).detail || 'Ошибка';
  }
});
</script>
</body></html>
